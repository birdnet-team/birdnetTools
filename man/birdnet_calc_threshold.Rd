% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/birdnet_calc_threshold.R
\name{birdnet_calc_threshold}
\alias{birdnet_calc_threshold}
\title{Calculate species-specific confidence thresholds for BirdNET detections}
\usage{
birdnet_calc_threshold(
  validated_data,
  full_data = NULL,
  probability = NULL,
  precision = NULL
)
}
\arguments{
\item{validated_data}{A data frame of validated BirdNET detections with columns \code{common_name},
\code{confidence}, and \code{validation}. The \code{validation} column must contain 1 (true positives)
and 0 (false positives).}

\item{full_data}{Optional. A data frame of all BirdNET detections with at least \code{common_name}
and \code{confidence} columns. If \code{NULL}, \code{validated_data} is used instead.}

\item{probability}{Numeric. A target predicted probability (between 0 and 1) used to calculate thresholds
from the logistic regression model.}

\item{precision}{Numeric. A target precision (between 0 and 1) used to select the lowest threshold
that achieves the desired precision.}
}
\value{
A tibble with two columns:
\describe{
\item{common_name}{Species common name.}
\item{threshold}{The calculated confidence threshold for that species.}
}
}
\description{
Computes species-specific confidence thresholds for BirdNET detections using either a target
\code{precision} or a target predicted \code{probability} from a logistic regression model.
The function returns one threshold per species.
The \code{precision}-based approach follows \href{https://link.springer.com/article/10.1007/s10336-025-02260-w}{Tseng et al. (2025)},
while the \code{probability}-based method is adapted from \href{https://link.springer.com/article/10.1007/s10336-024-02144-5}{Wood and Kahl (2024)}.
}
\details{
You must supply exactly one of \code{precision} or \code{probability}. If both or neither are provided,
the function will throw an error.

When using the precision method, the function predicts probabilities for each detection using a logistic
regression model fit to \code{validated_data}. It then identifies the lowest confidence threshold that meets
or exceeds the target precision.

When using the probability method, the function calculates the confidence threshold corresponding to
the inverse logit of the target predicted probability from the regression model.

All thresholds are clamped to fall between the minimum observed confidence in \code{validated_data}
and 1.
}
\references{
Tseng, S., Hodder, D. P., & Otter, K. A. (2025). Setting BirdNET confidence thresholds: Species-specific vs. universal approaches. \emph{Journal of Ornithology}. https://doi.org/10.1007/s10336-025-02260-w
Wood, C. M., & Kahl, S. (2024). Guidelines for appropriate use of BirdNET scores and other detector outputs. \emph{Journal of Ornithology}. https://doi.org/10.1007/s10336-024-02144-5
}
